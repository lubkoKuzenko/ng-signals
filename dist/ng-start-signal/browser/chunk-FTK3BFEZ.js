import{a as y}from"./chunk-77SGJS44.js";import{g as R,k as w,l as b}from"./chunk-BCWWF2KX.js";import{$a as c,Aa as S,Ab as C,Cb as E,Da as a,Ga as _,Gb as v,Hb as h,Ib as n,Jb as i,Oa as d,Ob as P,Pb as F,Qb as x,Wb as s,Xb as g,bc as U,dc as k,ja as u,kb as D,ob as T,pa as f,za as I}from"./chunk-IHVPKYJR.js";var L="https://jsonplaceholder.typicode.com",p=class t extends b{urls=this.getUrls(`${L}/users`);static \u0275fac=(()=>{let e;return function(o){return(e||(e=a(t)))(o||t)}})();static \u0275prov=u({token:t,factory:t.\u0275fac})};var M="https://jsonplaceholder.typicode.com",m=class t extends b{userId=d(null);setUserId(e){this.userId.set(e)}get urls(){let e=this.userId(),r=e?`${M}/users/${e}/todos`:`${M}/todos`;return this.getUrls(r)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=a(t)))(o||t)}})();static \u0275prov=u({token:t,factory:t.\u0275fac})};var N=t=>["/data-provider/",t],$=(t,e)=>e.id;function V(t,e){if(t&1&&(n(0,"li")(1,"a",8),s(2),i()()),t&2){let r=e.$implicit,o=x();c(),E("font-bold",o.isActive(r.id)),C("routerLink",k(4,N,r.id)),c(),g(r.name)}}function O(t,e){t&1&&(n(0,"p"),s(1,"No users found."),i())}function Y(t,e){if(t&1){let r=P();n(0,"div",7)(1,"h2",9),s(2),i(),n(3,"button",10),F("click",function(){let A=I(r).$implicit,B=x();return S(B.deleteTodo(A.id))}),s(4," Delete "),i()()}if(t&2){let r=e.$implicit;c(2),g(r.title)}}function q(t,e){t&1&&(n(0,"p"),s(1,"No users found."),i())}var l=class t extends w{#t=f(p);#e=f(m);#r=f(_);routeSub;users=d([]);todos=d([]);ngOnInit(){this.#t.getEntries().pipe(y(this.#r)).subscribe(e=>this.users.set(e)),this.#t.getEntryById("3").pipe(y(this.#r)).subscribe(e=>console.log(e)),this.routeSub=this.activatedRoute.paramMap.subscribe(e=>{let r=e.get("userId");if(r){let o=parseInt(r,10);this.loadTodos(o)}else this.todos.set([]),this.router.navigate(["/data-provider/1"])})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}isActive(e){return this.activatedRoute.snapshot.paramMap.get("userId")===String(e)}loadTodos(e){this.#e.setUserId(e),this.#e.getEntries().subscribe(r=>{this.todos.set(r)})}deleteTodo(e){this.#e.deleteEntry(e.toString()).subscribe({next:()=>{let r=this.activatedRoute.snapshot.paramMap.get("userId");r!==null&&this.loadTodos(Number(r))},error:r=>{console.error("Error deleting todo:",r)}})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=a(t)))(o||t)}})();static \u0275cmp=D({type:t,selectors:[["app-data-provider"]],features:[U([p,m]),T],decls:16,vars:2,consts:[[1,"min-h-screen","bg--gray-200","text-white"],[1,"container","max-w-screen-xl","mx-auto"],[1,"flex","min-h-screen","text-white"],[1,"w-64","bg-gray-300","p-4","text-black"],[1,"space-y-2"],[1,"flex-1","p-8"],[1,"text-black"],[1,"bg-gray-600","py-1","px-3","rounded-lg","my-2","flex","justify-between","items-center"],[1,"block","p-2","rounded","hover:bg-gray-200",3,"routerLink"],[1,"text-2xl","font-semibold","mb-3","text-green-400"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"section",1)(2,"div",2)(3,"aside",3)(4,"nav")(5,"ul",4),v(6,V,3,6,"li",null,$,!1,O,2,0,"p"),i()()(),n(9,"main",5)(10,"article",1)(11,"h1",6),s(12,"Todos:"),i(),v(13,Y,5,1,"div",7,$,!1,q,2,0,"p"),i()()()()()),r&2&&(c(6),h(o.users()),c(7),h(o.todos()))},dependencies:[R],encapsulation:2})};var ce=[{path:"",component:l},{path:":userId",component:l}];export{ce as dataProviderRoutes};
